#
#  General Catalyst Configuration 
#

name CAP
debug false
default_view Default

# Set this value to 1 (or some other true value) to enable extended
# debugging messages related to authorization and authentication. This
# will result in supplied password information being written to log files,
# so enable this feature with care.
debug_auth 1

# Database connection info
<Component Model::DB>
    schema_class CAP::Schema
    <connect_info>
        dsn dbi:mysql:cap
        user cap
        password ""
    </connect_info>
</Component>

#
# Application-Specific Configuration
#

default_portal co

version 0.6

# These path names must be relative to the application 'root'.

# Root of the content repository
repository /opt/cap-repos

# Where uploaded files go
uploads ../../../data/uploads

# Path to the content repository (TIFF images, PDFs, etc.)
content /Users/william/Projects/portal/content

# Where we can find the application profiles
profiles /Users/william/Projects/svn/cap-trunk/tools/profiles

# Number of issues or other child elements to display at a time.
children_per_page 10

# Where we can find the NetPBM programs
netpbm_path /opt/local/bin

# The MIME types we can presently handle - should be deprecated
<MimeTypes>
  image/tiff = true
  image/jpeg = true
  application/pdf = true
</MimeTypes>

# Default parameters. These should all be set to sensible values, or the
# application may behave strangely.
<defaults>
    image_size = 600 # default width (in pixels) for derivative images
    image_min = 50 # minimum size allowed for derivative images
    image_max = 1200 # maximum size allowed for derivative images
</defaults>

<solr>

  select_uri http://localhost:8983/solr/select
  update_uri http://localhost:8983/solr/update

  # Fields to return for various search types
  <fl>
    ancestors key
    ancestors type
    ancestors label
    ancestors pkey
    ancestors gkey

    search key
    search type
    search contributor
    search label
    search pkey
    search gkey
    search seq
    search lang
    search media
    search canonicalUri
  </fl>

  <fields>
    tx tx # global text field
    tx tx_en # English text
    tx tx_fr # French text
    ti ti # global title field
    ti ti_en # etc.
    ti ti_fr
    au au
    au au_en
    au au_fr
    su su
    su su_en
    su su_fr
    no no
    no no_en
    no no_fr
    kw kw
    kw kw_en
    kw kw_fr
    q  kw
    q  kw_en
    q  kw_fr
  </fields>

</solr>

# Controls whether an action can be accessed at all, whether it is public,
# and if not, what role(s) are allowed to access the action.

<action "/auth/login">
  enabled true
  public true
</action>

<action "/auth/logout">
  enabled true
  public true
</action>

<action "/file/file">
  enabled true
  public true
</action>

<action "/file/get">
  enabled true
  public true
</action>

<action "/page">
  enabled true
  public true
</action>

<action "/post">
  enabled true
  public true
</action>

<action "/index">
  enabled true
  public true
</action>

<action "/search/search">
  enabled true
  public true
</action>

<action "/show/index">
  enabled true
  public true
</action>

<action "/static">
  enabled true
  public true
</action>

<action "/test_error">
  enabled true
  public true
</action>

# List of valid contributor namespaces with the name of the contributor.
<contributor>
  bvas   Simon Fraser University
  oocihm Canadiana.org
  ooe    Department of Foreign Affairs and International Trade
  otu    University of Toronto
  qmbn   Bibliothèque et Archives Nationales du Québec
</contributor>

# Automatically prefix an application and interface to all requests
# using the specified URL. The trailing slash must be included.
<prefix>
  # Example:
  # http://www.myserver.com/ = myapp/en
  # Requests for http://www.myserver.com/foo will be processed as myap/en/foo, not foo
</prefix>

