# DO NOT EDIT THIS FILE
#
# It is recommended that you do not edit this file. Site-specific
# information and custom changes should be placed in a file called
# cap_local.conf, which will override declarations made here.

# For Boolean values, you can use "1", "true", "yes", and "on"
# interchangeably. Likewise, you can use "0", "false", "no" and "off".


<cookies>
    persist = persist
    lang = lang
</cookies>


#
# BASIC CONFIGURATION
#

# Name of the Catalyst application
name CAP

# The application root directory
# Note: This is relative to the current directory when you run
# root = root

# Name of the default view to render
default_view Default

# Version of the MySQL database to look for
db_version = 52

#
# USER MANAGEMENT
#

# Re-parse user data this many requests
session_refresh_interval 20

#
# SUBSCRIPTIONS & TAX RECEIPTS
#

# Subscription values (should move to database later)
subscription_amount = 100
subscription_period = 367
# Comma-separated list of email addresses
#subscription_admins = 

# If > 0, number of days for a free subscription trial
subscription_trial  = 0

# Number of days before we provide an "Extend subscription" link
subscription_warning = 14

#set the tax receipt percentage
tax_rcpt_pct = 0

# Send an account renewal reminder email message to any trial or paid
# account that expires in this many business days, where a business day is
# whatever Date::Manip thinks it is (assume Monday-Friday).
expiring_acct_reminder = 5

#set the number of days a new user has to confirm his subscription 
confirm_grace_period = 30

#
# SEARCH ENGINE OPTIMIZATION
#

# Number of URLs to generate per sitemap file. Note that Google allows a
# maximum of 50,000 URLs per sitemap, a maximum size of 10 MB per file,
# and 50,000 sitemaps in total.
sitemap_url_limit 500

#
# EMAIL
#

# An array of parameters to pass to the mailer. For standard SMTP, the
# first value should be 'SMTP' and the second the name of the mail host.
# These parameters should be sent in cap_local.conf instead of here. You
# cannot set them in both places and hope one overrides the latter.
#email = SMTP
#email = localhost

# What address system messages should be from
# email_from = "Do Not Reply" <noreply@canadiana.ca>

# An email address for technical support (used in the feedback form)
#support_email = support@canadiana.ca

#
# VIEWS
#

# A set of views that are available, in addition to the default view,
<fmt "rdf">
    view RDF
    content_type application/rdf+xml
</fmt>

<fmt "ajax">
    view Ajax
    content_type text/plain
</fmt>

<fmt "json">
    view JSON
    content_type text/plain
</fmt>

#
# SOLR
#
<Component Model::Solr>
    server = http://brie.cihm:8983/solr/live
</Component>

#
# MYSQL
#

# MySQL database connection information.
<Component Model::DB>
    schema_class CAP::Schema
    <connect_info>
        dsn dbi:mysql:cap
        user cap
        password ""
    </connect_info>
</Component>

# Add base URLs to respond to portals other than the default (including
# the default is optional). The full <protocol>://<host>[<:port>]/ address
# must be specified.
<portals>
    http://localhost:3000/ = example
</portals>


# How to access the content server, and the expiry time to set for
# requests.
<content>
  url      = http://cos.canadiana.ca
  key      = 1
  password = "U6&yCB3aw!@:"
  expires  = 3600
</content>

# Parameters for generating derivatives
<derivative>
  # Translate the s parameter into maximum image dimensions.
  default_size = 800x800
  <size>
    t = 100x100
    1 = 800x800
    2 = 1024x1024
    3 = 1296x1296
    4 = 1600x1600
    5 = 2048x2048
  </size>

  # Translate the r parameter into rotation (in degrees). The default is
  # no rotation.
  <rotate>
    0 = 0
    1 = 90
    2 = 180
    3 = 270
  </rotate>

</derivative>

# User information
<user>
    # Regular expressions defining requirements for each user field.
    # Username must be a valid email address.
    <fields>
        username = ^\S+@[\w\.-]+$
        name     = \S
        password = ^\S{6,}$
    </fields>
</user>


# Needed by the Cron that generates tax receipts
#<taxreceipt>
#    prog = /opt/cap-conf/tax-rcpt/generate.sh
#    outputdir = /opt/cap-var/tax-rcpt
#    format = 011EC%06d
#    bcc = user1@canadiana.ca,user2@canadiana.ca
#</taxreceipt>

# Paypal module needs configuration similar to the following, which is Canadiana's
# sandbox configuration.
<payment paypal>
    username  = seller_1298561993_biz_api1.canadiana.ca
    password  = 1298562002
    signature = AWWNmUQE8z7.L28t4eRmgnkEAPJgA4Bj.muFtwf3iFhZFI1RV6CK9Q2-
    sandbox   = 1
</payment>

default_url = http://www.canadiana.ca

production = 1
# Whether we are in production, which determines whether certain things
# will run.  Currently this includes:
# - generate tax receipts, and email them
# - generate emails to inform people their account is about to expire.
#
# This is a filename: if option exists && file it points to exists  ==> we are in production
productionflagfile = /var/run/cap/production
