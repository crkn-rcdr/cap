# DO NOT EDIT THIS FILE
#
# It is recommended that you do not edit this file. Site-specific
# information and custom changes should be placed in a file called
# cap_local.conf, which will override declarations made here.

# For Boolean values, you can use "1", "true", "yes", and "on"
# interchangeably. Likewise, you can use "0", "false", "no" and "off".

# Name of the Catalyst application
name CAP

# The application root directory
root = root

# Name of the default view to render
default_view Default

# Version of the MySQL database to look for
db_version = 11

# Re-parse user data this many requests
init_interval 3

# Subscription values (should move to database later)
subscription_amount = 100
subscription_period = 367
subscription_admins = russell@office.canadiana.ca,russell.mcormond@canadiana.ca

# If > 0, number of days for a free subscription trial
subscription_trial  = 90

# An array of parameters to pass to the mailer. For standard SMTP, the
# first value should be 'SMTP' and the second the name of the mail host.
# These parameters should be sent in cap_local.conf instead of here. You
# cannot set them in both places and hope one overrides the latter.
#email = SMTP
#email = localhost

# A set of views that are available, in addition to the default view,
# 'json' and 'xml' (The latter two are built-in and the former is assumed
# to be present. View names are given an initial capital to map to a view
# module. I.e. "test" maps to "Test.pm".
<fmt "rdf">
    view RDF
    content_type application/rdf+xml
</fmt>

<fmt "ajax">
    view Ajax
    content_type text/plain
</fmt>

<fmt "json">
    view JSON
    content_type text/plain
</fmt>


# Set to true to enable some addtional profiling and debugging output both
# in the log files and on the templates. Set to false for production
# installations.
debug true

# TODO: this should be localhost:8983; put this in cap_local.conf
<Component Model::Solr>
    server = http://localhost:8983/solr
</Component>

# MySQL database connection information.
<Component Model::DB>
    schema_class CAP::Schema
    <connect_info>
        dsn dbi:mysql:cap
        user cap
        password ""
    </connect_info>
</Component>

# The default portal to serve if the request base does not match something
# in the <portal> section below.
default_portal example

# Add base URLs to respond to portals other than the default (including
# the default is optional). The full <protocol>://<host>[<:port>]/ address
# must be specified.
<portals>
    http://localhost:3000/ = example
</portals>


# How to access the content server, and the expiry time to set for
# requests.
<content>
  url      = http://localhost/cos
  key      = 1
  password = default
  expires  = 3600
</content>

# Parameters for generating derivatives
<derivative>
  # Translate the s parameter into maximum image dimensions.
  default_size = 800x800
  <size>
    t = 100x100
    1 = 800x800
    2 = 1024x1024
    3 = 1296x1296
  </size>

  # Translate the r parameter into rotation (in degrees). The default is
  # no rotation.
  <rotate>
    0 = 0
    1 = 90
    2 = 180
    3 = 270
  </rotate>

</derivative>

# User information
<user>
    # Regular expressions defining requirements for each user field.
    # Username must be a valid email address.
    <fields>
        username = ^\S+@[\w\.]+$
        name     = \S
        password = ^\S{6,}$
    </fields>
</user>
